@page "/users/view/{id:int}"
@inject HttpClient _client

<h3>User Profile</h3>

@if (user != null)
{
    <div>
        @if (user.ProfilePictureData != null && user.ProfilePictureData.Length > 0)
        {
            <img src="data:image/jpeg;base64,@Convert.ToBase64String(user.ProfilePictureData)" alt="Profile Picture" style="height:100px; width:100px; object-fit:cover;" />
        }
        else
        {
            <i class="oi oi-person" aria-hidden="true" style="font-size: 100px;"></i> <!-- Display a default icon if no picture exists -->
        }
        <p>Name: @user.FirstName @user.LastName</p>
        <p>Gender: @user.Gender</p>
        <p>Bio: @user.Bio</p>
        <p>Nickname: @user.Nickname</p>
        <p>Location: @user.Location</p>
        <p>Popularity: @user.Popularity</p>
        <!-- Add more fields as needed -->
    </div>
}
else
{
    <p>Loading...</p>
}

@code {
    [Parameter] public int id { get; set; }
    private User? user;

    protected override async Task OnInitializedAsync()
    {
        user = await _client.GetFromJsonAsync<User>($"{Endpoints.UsersEndpoint}/{id}");
    }
}